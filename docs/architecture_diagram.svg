<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1600 900" width="1600" height="900">
  <!-- Background -->
  <rect width="1600" height="900" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="800" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Campaign Automation Tool - Architecture
  </text>

  <!-- Layer 1: User Interfaces -->
  <rect x="50" y="80" width="1500" height="100" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8"/>
  <text x="800" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#1565c0">
    USER INTERFACES
  </text>

  <!-- CLI Box -->
  <rect x="200" y="115" width="280" height="50" fill="#ffffff" stroke="#1976d2" stroke-width="2" rx="5"/>
  <text x="340" y="138" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Command Line (CLI)
  </text>
  <text x="340" y="156" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
    run_workflow.cmd
  </text>

  <!-- Agent Box -->
  <rect x="1120" y="115" width="280" height="50" fill="#ffffff" stroke="#1976d2" stroke-width="2" rx="5"/>
  <text x="1260" y="138" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Agent Watcher (Auto)
  </text>
  <text x="1260" y="156" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
    start_agent.cmd
  </text>

  <!-- Arrows from UI to Workflow -->
  <line x1="340" y1="165" x2="340" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="1260" y1="165" x2="1260" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="340" y1="200" x2="800" y2="200" stroke="#333" stroke-width="2"/>
  <line x1="1260" y1="200" x2="800" y2="200" stroke="#333" stroke-width="2"/>
  <line x1="800" y1="200" x2="800" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Layer 2: Workflow Orchestrator -->
  <rect x="50" y="220" width="1500" height="140" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="8"/>
  <text x="800" y="245" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#e65100">
    WORKFLOW ORCHESTRATOR (workflow.py)
  </text>

  <!-- Workflow Steps -->
  <text x="100" y="275" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    1. Validate Campaign YAML
  </text>
  <text x="100" y="295" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    2. Validate Required Assets
  </text>
  <text x="100" y="315" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    3. Generate Folder Structure
  </text>
  <text x="100" y="335" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    4. Generate Prompts (GPT-5)
  </text>

  <text x="600" y="275" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    5. Generate Hero Images (Gemini)
  </text>
  <text x="600" y="295" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    6. Localize Images (Gemini)
  </text>
  <text x="600" y="315" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    7. Generate Report
  </text>
  <text x="600" y="335" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    8. Upload to Dropbox (optional)
  </text>

  <!-- Arrow from Workflow to Processing -->
  <line x1="800" y1="360" x2="800" y2="390" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Layer 3: Core Processing -->
  <rect x="50" y="390" width="1500" height="200" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="8"/>
  <text x="800" y="415" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2e7d32">
    CORE PROCESSING MODULES
  </text>

  <!-- ROW 1: Modules aligned with External Services -->

  <!-- Prompt Generator (aligned with GPT-5) -->
  <rect x="80" y="435" width="140" height="70" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="150" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Prompt Gen
  </text>
  <text x="150" y="475" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    generate_image_
  </text>
  <text x="150" y="488" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    prompt.py
  </text>
  <text x="150" y="500" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#999">
    GPT-5
  </text>

  <!-- Hero Image Generator (aligned with Gemini) -->
  <rect x="240" y="435" width="140" height="70" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="310" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Hero Image
  </text>
  <text x="310" y="475" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    generate_hero_
  </text>
  <text x="310" y="488" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    image.py
  </text>
  <text x="310" y="500" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#999">
    Gemini
  </text>

  <!-- Campaign Localizer (aligned with Gemini) -->
  <rect x="400" y="435" width="140" height="70" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="470" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Localizer
  </text>
  <text x="470" y="475" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    localize_
  </text>
  <text x="470" y="488" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    campaign.py
  </text>
  <text x="470" y="500" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#999">
    Gemini
  </text>

  <!-- ROW 2: Modules aligned with Configuration -->

  <!-- Agent Watcher (aligned with Credentials) -->
  <rect x="580" y="435" width="180" height="70" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="670" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Agent Watcher
  </text>
  <text x="670" y="475" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    agent_watcher.py
  </text>
  <text x="670" y="488" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    File Monitoring
  </text>

  <!-- ROW 3: Modules aligned with Data Storage -->

  <!-- Campaign Validator (aligned with schema) -->
  <rect x="840" y="435" width="160" height="70" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="920" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Campaign Val
  </text>
  <text x="920" y="475" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    campaign_
  </text>
  <text x="920" y="488" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    validator.py
  </text>
  <text x="920" y="500" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#999">
    Schema
  </text>

  <!-- Assets Validator (aligned with input) -->
  <rect x="1020" y="435" width="160" height="70" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="1100" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Assets Val
  </text>
  <text x="1100" y="475" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    assets_
  </text>
  <text x="1100" y="488" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    validator.py
  </text>
  <text x="1100" y="500" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#999">
    Assets
  </text>

  <!-- Folder Generator (aligned with output) -->
  <rect x="1200" y="435" width="160" height="70" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="1280" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Folder Gen
  </text>
  <text x="1280" y="475" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    output_folder_
  </text>
  <text x="1280" y="488" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    generator.py
  </text>
  <text x="1280" y="500" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#999">
    Output
  </text>

  <!-- Report Generator (aligned with output) -->
  <rect x="1380" y="435" width="150" height="70" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="1455" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Report Gen
  </text>
  <text x="1455" y="475" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    generate_
  </text>
  <text x="1455" y="488" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    report.py
  </text>
  <text x="1455" y="500" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#999">
    Reports
  </text>

  <!-- BOTTOM ROW: Dropbox Helper -->
  <rect x="400" y="520" width="110" height="55" fill="#ffffff" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="455" y="543" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Dropbox
  </text>
  <text x="455" y="560" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">
    dropbox_helper
  </text>

  <!-- Arrows - SHORT and STRAIGHT -->

  <!-- Prompt Generator -> GPT-5 -->
  <line x1="150" y1="505" x2="150" y2="655" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Hero Image Generator -> Gemini -->
  <line x1="310" y1="505" x2="310" y2="655" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Campaign Localizer -> Gemini -->
  <line x1="390" y1="470" x2="340" y2="470" stroke="#333" stroke-width="2"/>
  <line x1="340" y1="470" x2="340" y2="655" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Dropbox Helper -> Dropbox API -->
  <line x1="455" y1="575" x2="455" y2="655" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Gen AI modules -> Credentials (dashed) -->
  <line x1="150" y1="505" x2="670" y2="655" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="310" y1="505" x2="670" y2="655" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="470" y1="505" x2="670" y2="655" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="455" y1="575" x2="670" y2="655" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>

  <!-- Validators -> Data Storage (dotted) -->
  <line x1="920" y1="505" x2="920" y2="655" stroke="#666" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="1100" y1="505" x2="950" y2="655" stroke="#666" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="1280" y1="505" x2="1190" y2="655" stroke="#666" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="1455" y1="505" x2="1190" y2="655" stroke="#666" stroke-width="1" stroke-dasharray="3,3"/>

  <!-- Layer 4: External Services, Configuration & Data Storage (Split into 3) -->

  <!-- External Services (Left) -->
  <rect x="50" y="610" width="480" height="160" fill="#ffebee" stroke="#c62828" stroke-width="2" rx="8"/>
  <text x="290" y="635" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#b71c1c">
    EXTERNAL SERVICES (APIs)
  </text>

  <!-- OpenAI GPT-5 -->
  <rect x="80" y="655" width="140" height="100" fill="#ffffff" stroke="#c62828" stroke-width="2" rx="5"/>
  <text x="150" y="678" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    OpenAI GPT-5
  </text>
  <text x="150" y="697" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Prompt
  </text>
  <text x="150" y="712" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Generation
  </text>
  <text x="150" y="727" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Scene
  </text>
  <text x="150" y="742" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Descriptions
  </text>

  <!-- Google Gemini -->
  <rect x="240" y="655" width="140" height="100" fill="#ffffff" stroke="#c62828" stroke-width="2" rx="5"/>
  <text x="310" y="678" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Gemini 2.5
  </text>
  <text x="310" y="697" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Image
  </text>
  <text x="310" y="712" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Generation
  </text>
  <text x="310" y="727" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Image
  </text>
  <text x="310" y="742" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Localization
  </text>

  <!-- Dropbox -->
  <rect x="400" y="655" width="110" height="100" fill="#ffffff" stroke="#c62828" stroke-width="2" rx="5"/>
  <text x="455" y="678" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Dropbox
  </text>
  <text x="455" y="693" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#999">
    (Optional)
  </text>
  <text x="455" y="712" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Input Sync
  </text>
  <text x="455" y="727" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Output
  </text>
  <text x="455" y="742" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Backup
  </text>

  <!-- Configuration (Middle) -->
  <rect x="550" y="610" width="240" height="160" fill="#fff9c4" stroke="#f9a825" stroke-width="2" rx="8"/>
  <text x="670" y="635" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#f57f17">
    CONFIGURATION
  </text>

  <!-- Credentials Manager -->
  <rect x="580" y="655" width="180" height="100" fill="#ffffff" stroke="#f9a825" stroke-width="2" rx="5"/>
  <text x="670" y="678" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Credentials
  </text>
  <text x="670" y="693" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#999">
    credentials.json
  </text>
  <text x="670" y="713" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    OpenAI API Key
  </text>
  <text x="670" y="728" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Gemini API Key
  </text>
  <text x="670" y="743" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Dropbox Token
  </text>

  <!-- Data Storage (Right) -->
  <rect x="810" y="610" width="740" height="240" fill="#f3e5f5" stroke="#6a1b9a" stroke-width="2" rx="8"/>
  <text x="1180" y="635" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4a148c">
    DATA STORAGE
  </text>

  <!-- Input Folder -->
  <rect x="840" y="655" width="220" height="105" fill="#ffffff" stroke="#6a1b9a" stroke-width="2" rx="5"/>
  <text x="950" y="678" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    input/
  </text>
  <text x="950" y="697" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    campaigns/
  </text>
  <text x="950" y="712" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    └─ *.yaml (Campaign files)
  </text>
  <text x="950" y="730" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    assets/
  </text>
  <text x="950" y="745" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    └─ products/, logos/
  </text>

  <!-- Output Folder -->
  <rect x="1080" y="655" width="220" height="105" fill="#ffffff" stroke="#6a1b9a" stroke-width="2" rx="5"/>
  <text x="1190" y="678" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    output/
  </text>
  <text x="1190" y="697" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    {campaign_id}/
  </text>
  <text x="1190" y="712" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    └─ {product_id}/
  </text>
  <text x="1190" y="727" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
       └─ {ratio}/{market}/
  </text>
  <text x="1190" y="742" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
          └─ images/
  </text>

  <!-- Schema & Logs -->
  <rect x="1320" y="655" width="210" height="50" fill="#ffffff" stroke="#6a1b9a" stroke-width="2" rx="5"/>
  <text x="1425" y="678" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    schema/
  </text>
  <text x="1425" y="695" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    campaign_schema.yaml
  </text>

  <rect x="1320" y="715" width="210" height="45" fill="#ffffff" stroke="#6a1b9a" stroke-width="2" rx="5"/>
  <text x="1425" y="738" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    logs/
  </text>
  <text x="1425" y="753" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    workflow_*.log
  </text>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>

  <!-- Bottom Info Box -->
  <rect x="50" y="865" width="1500" height="25" fill="#fafafa" stroke="#ccc" stroke-width="1" rx="3"/>
  <text x="800" y="882" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
    Workflow: Validate → Generate Prompts (GPT-5) → Generate Images (Gemini) → Localize (Gemini) → Report
  </text>
</svg>
